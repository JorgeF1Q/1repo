<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dashboard Joyería Mares — HTML</title>
  <!-- TailwindCSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
  <style>
    /* Suaves sombras y bordes redondeados consistentes */
    .card { @apply bg-white rounded-xl shadow-lg border border-gray-100; }
    .chip { @apply px-2 py-1 rounded-full text-xs font-medium; }
  </style>
</head>
<body class="min-h-screen bg-gray-50 p-6">
  <!-- Header -->
  <header class="mb-8">
    <div class="flex items-center justify-between">
      <div>
        <h1 class="text-3xl font-bold text-gray-900">Dashboard Joyería Mares</h1>
        <p class="text-gray-600 mt-2">Panel de control y análisis de ventas</p>
      </div>
      <div class="flex gap-3">
        <button id="btnExport" class="flex items-center px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
          <i data-lucide="download" class="w-4 h-4 mr-2"></i>
          Exportar
        </button>
        <button id="btnRefresh" class="flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors">
          <i data-lucide="refresh-cw" class="w-4 h-4 mr-2"></i>
          Actualizar
        </button>
      </div>
    </div>

    <!-- Tabs -->
    <nav class="flex gap-1 mt-6 bg-gray-100 p-1 rounded-lg w-fit">
      <button data-tab="overview" class="tab-btn px-4 py-2 rounded-md text-sm font-medium transition-colors bg-white text-purple-600 shadow">Resumen General</button>
      <button data-tab="sales" class="tab-btn px-4 py-2 rounded-md text-sm font-medium transition-colors text-gray-600 hover:text-gray-900">Ventas</button>
      <button data-tab="customers" class="tab-btn px-4 py-2 rounded-md text-sm font-medium transition-colors text-gray-600 hover:text-gray-900">Clientes</button>
      <button data-tab="products" class="tab-btn px-4 py-2 rounded-md text-sm font-medium transition-colors text-gray-600 hover:text-gray-900">Productos</button>
    </nav>
  </header>

  <!-- ===== OVERVIEW ===== -->
  <section id="tab-overview">
    <!-- Métricas principales -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
      <div class="card p-6">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm font-medium text-gray-600 mb-1">Ventas Totales</p>
            <p id="metricTotalSales" class="text-2xl font-bold text-gray-900">$0</p>
            <div id="metricSalesGrowth" class="flex items-center mt-1 text-sm"></div>
          </div>
          <div class="p-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg">
            <i data-lucide="dollar-sign" class="w-6 h-6 text-white"></i>
          </div>
        </div>
      </div>
      <div class="card p-6">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm font-medium text-gray-600 mb-1">Órdenes</p>
            <p id="metricTotalOrders" class="text-2xl font-bold text-gray-900">0</p>
            <div id="metricOrdersGrowth" class="flex items-center mt-1 text-sm"></div>
          </div>
          <div class="p-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg">
            <i data-lucide="shopping-cart" class="w-6 h-6 text-white"></i>
          </div>
        </div>
      </div>
      <div class="card p-6">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm font-medium text-gray-600 mb-1">Clientes Únicos</p>
            <p id="metricTotalClients" class="text-2xl font-bold text-gray-900">0</p>
          </div>
          <div class="p-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg">
            <i data-lucide="users" class="w-6 h-6 text-white"></i>
          </div>
        </div>
      </div>
      <div class="card p-6">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm font-medium text-gray-600 mb-1">Valor Promedio Orden</p>
            <p id="metricAOV" class="text-2xl font-bold text-gray-900">$0</p>
          </div>
          <div class="p-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg">
            <i data-lucide="package" class="w-6 h-6 text-white"></i>
          </div>
        </div>
      </div>
    </div>

    <!-- Gráficos principales -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
      <div class="card p-6">
        <div class="flex items-center justify-between mb-6">
          <h3 class="text-lg font-semibold text-gray-900">Tendencia de Ventas</h3>
          <select id="periodSelect" class="border border-gray-300 rounded-lg px-3 py-1 text-sm">
            <option value="3m">3 meses</option>
            <option value="6m">6 meses</option>
            <option value="9m" selected>9 meses</option>
            <option value="12m">12 meses</option>
          </select>
        </div>
        <div class="h-[300px]"><canvas id="chartTrend"></canvas></div>
      </div>
      <div class="card p-6">
        <h3 class="text-lg font-semibold text-gray-900 mb-6">Ventas por Categoría</h3>
        <div class="h-[300px]"><canvas id="chartCategories"></canvas></div>
      </div>
    </div>
  </section>

  <!-- ===== SALES ===== -->
  <section id="tab-sales" class="hidden">
    <div class="card p-6 mb-6">
      <h3 class="text-lg font-semibold text-gray-900 mb-6">Análisis Detallado de Ventas</h3>
      <div class="h-[400px]"><canvas id="chartSalesBars"></canvas></div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <div class="card p-6">
        <h3 class="text-lg font-semibold text-gray-900 mb-4">Top 5 Categorías</h3>
        <div id="topCategories" class="space-y-3"></div>
      </div>
      <div class="card p-6">
        <h3 class="text-lg font-semibold text-gray-900 mb-4">Métricas de Rendimiento</h3>
        <div class="space-y-4">
          <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
            <span class="text-gray-600">Tasa de Conversión</span>
            <span class="font-semibold text-green-600">3.2%</span>
          </div>
          <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
            <span class="text-gray-600">Margen de Beneficio</span>
            <span class="font-semibold text-blue-600">65%</span>
          </div>
          <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
            <span class="text-gray-600">Ticket Promedio</span>
            <span id="metricAOV2" class="font-semibold text-purple-600">$0</span>
          </div>
          <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
            <span class="text-gray-600">Productos Devueltos</span>
            <span class="font-semibold text-red-600">2.1%</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== CUSTOMERS ===== -->
  <section id="tab-customers" class="hidden">
    <div class="card p-6 mb-6">
      <h3 class="text-lg font-semibold text-gray-900 mb-6">Top Clientes</h3>
      <div class="overflow-x-auto">
        <table class="w-full">
          <thead>
            <tr class="border-b border-gray-200">
              <th class="text-left py-3 px-4 font-medium text-gray-700">Cliente</th>
              <th class="text-left py-3 px-4 font-medium text-gray-700">Compras</th>
              <th class="text-left py-3 px-4 font-medium text-gray-700">Total Gastado</th>
              <th class="text-left py-3 px-4 font-medium text-gray-700">Última Compra</th>
            </tr>
          </thead>
          <tbody id="tblTopClients"></tbody>
        </table>
      </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <div class="card p-6">
        <h3 class="text-lg font-semibold text-gray-900 mb-4">Segmentación de Clientes</h3>
        <div class="space-y-3">
          <div class="flex justify-between"><span>Clientes VIP (&gt;$2000)</span><span class="font-semibold">12</span></div>
          <div class="flex justify-between"><span>Clientes Regulares</span><span class="font-semibold">28</span></div>
          <div class="flex justify-between"><span>Clientes Ocasionales</span><span class="font-semibold">15</span></div>
        </div>
      </div>
      <div class="card p-6">
        <h3 class="text-lg font-semibold text-gray-900 mb-4">Retención de Clientes</h3>
        <div class="text-center">
          <div class="text-3xl font-bold text-green-600 mb-2">78%</div>
          <p class="text-gray-600">Tasa de retención</p>
        </div>
      </div>
      <div class="card p-6">
        <h3 class="text-lg font-semibold text-gray-900 mb-4">Satisfacción</h3>
        <div class="text-center">
          <div class="flex items-center justify-center mb-2">
            <i data-lucide="star" class="w-5 h-5 text-yellow-400 fill-yellow-400"></i>
            <span class="text-3xl font-bold ml-2">4.8</span>
          </div>
          <p class="text-gray-600">Calificación promedio</p>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== PRODUCTS ===== -->
  <section id="tab-products" class="hidden">
    <div class="card p-6 mb-6">
      <h3 class="text-lg font-semibold text-gray-900 mb-6">Órdenes Recientes</h3>
      <div class="overflow-x-auto">
        <table class="w-full">
          <thead>
            <tr class="border-b border-gray-200">
              <th class="text-left py-3 px-4 font-medium text-gray-700">Orden ID</th>
              <th class="text-left py-3 px-4 font-medium text-gray-700">Cliente</th>
              <th class="text-left py-3 px-4 font-medium text-gray-700">Producto</th>
              <th class="text-left py-3 px-4 font-medium text-gray-700">Monto</th>
              <th class="text-left py-3 px-4 font-medium text-gray-700">Estado</th>
              <th class="text-left py-3 px-4 font-medium text-gray-700">Fecha</th>
            </tr>
          </thead>
          <tbody id="tblOrders"></tbody>
        </table>
      </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <div class="card p-6">
        <h3 class="text-lg font-semibold text-gray-900 mb-4">Inventario por Categoría</h3>
        <div class="h-[250px]"><canvas id="chartInventory"></canvas></div>
      </div>
      <div class="card p-6">
        <h3 class="text-lg font-semibold text-gray-900 mb-4">Alertas de Inventario</h3>
        <div class="space-y-3" id="alertsInventory"></div>
      </div>
    </div>
  </section>

  
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="Js/config.js"></script>
  <script type="module" src="Js/reporteria.js"></script>
</body>
</html>
